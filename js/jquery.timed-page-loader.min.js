!function(i){i.fn.timedPageLoader=function(e){function n(){r.find(".page-current").fadeOut(1e3,function(){i(this).html(r.find(".page-new").html()),i(this).fadeIn(1e3),f=r.find(".page-current .next-page").attr("href"),f.length>-1?("vertical"==h.direction?(console.log("fuseContainerHeight: "+d),a.height(d)):a.width(s),t()):r.fadeOut(),r.find(".page-new").load(f)})}function t(){r.hasClass("vertical")?(c=a.height(),o=c/d,a.animate({height:0},h.fuseTime*o,"linear",function(){n()})):(l=a.width(),o=l/s,a.animate({width:0},h.fuseTime*o,"linear",function(){n()}))}var a,d,s,c,l,o,f,h=i.extend({fuseTime:1e4,firstPage:"page1.html",direction:"horizontal"},e),r=this;i(document).ready(function(){"vertical"==h.direction?r.addClass("vertical"):r.addClass("horizontal"),r.append('<div class="fuse-container"><div class="fuse"></div><div class="glyphicon glyphicon-pause"></div><div class="glyphicon glyphicon-play"></div></div><div class="page-current"></div><div class="page-new"></div>'),a=r.find(".fuse"),d=r.height(),s=r.width(),i(".page-current").load(h.firstPage),i(".page-new").load("page2.html"),t()}),r.on("click",".fuse-container",function(){var e=i(this).find(".glyphicon:visible").attr("class");i(this).find(".glyphicon:visible").fadeOut().siblings(".glyphicon").fadeIn(),e.indexOf("pause")>-1?a.stop():t()}),r.on("click",".next-page",function(){return a.stop(),n(),!1})}}(jQuery);
